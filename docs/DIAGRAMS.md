# ğŸ¨ Visual Diagrams - Whiteboard Permission System

## User Experience Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WHITEBOARD PERMISSION SYSTEM                             â”‚
â”‚                     (Request â†’ Approve â†’ Draw)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


SCENARIO: Group Video Call with Teacher (Admin) and Students

Step 1: Video Call Started
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Teacher's Screen               â”‚  â”‚ Student's Screen                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¹ Video Grid                  â”‚  â”‚ ğŸ“¹ Video Grid                         â”‚
â”‚ (Teacher + 3 students)         â”‚  â”‚ (All participants)                    â”‚
â”‚                                â”‚  â”‚                                        â”‚
â”‚ [ğŸ“ Whiteboard Button]         â”‚  â”‚ [ğŸ“ Whiteboard Button]                â”‚
â”‚                                â”‚  â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Step 2: Whiteboard Opened
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TEACHER'S WHITEBOARD (Can Draw)          STUDENT'S WHITEBOARD (View Only)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tools:                              â”‚  â”‚ Canvas (View Only)                  â”‚
â”‚ âœï¸ Pen | ğŸ§¹ Eraser                  â”‚  â”‚                                     â”‚
â”‚ [Color] Size: 2px                   â”‚  â”‚ [Teacher's drawing appears here]    â”‚
â”‚ [ğŸ—‘ï¸ Clear]                          â”‚  â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ [Teacher drawing board]             â”‚  â”‚ â”‚ ğŸ‘ï¸ View Only                   â”‚ â”‚
â”‚                                     â”‚  â”‚ â”‚                                 â”‚ â”‚
â”‚                                     â”‚  â”‚ â”‚ Admin hasn't granted you        â”‚ â”‚
â”‚ ğŸ”” Drawing Requests (0) - EMPTY     â”‚  â”‚ â”‚ permission to draw              â”‚ â”‚
â”‚                                     â”‚  â”‚ â”‚                                 â”‚ â”‚
â”‚ âœï¸ Has Drawing Permission           â”‚  â”‚ â”‚ [ğŸ“ Request Drawing Permission] â”‚ â”‚
â”‚ â€¢ (no one has access yet)           â”‚  â”‚ â”‚         â†‘                       â”‚ â”‚
â”‚                                     â”‚  â”‚ â”‚    Student clicks               â”‚ â”‚
â”‚                                     â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Step 3: Student Requests Permission
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TIMELINE OF EVENTS

Time 0:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Student clicks:  â”‚
â”‚ "Request Button" â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â†’ Frontend: handleRequestPermission()
           â”‚
           â”œâ”€â†’ setHasRequested(true)
           â”‚
           â””â”€â†’ socket.emit('whiteboard-request-permission', {
                 roomId: 'room-123',
                 userId: 'student-456',
                 username: 'John Smith'
               })

Time 0.1ms (Socket transmit):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend receives request              â”‚
â”‚ server.js socket handler              â”‚
â”‚                                       â”‚
â”‚ socket.on('whiteboard-request-...')   â”‚
â”‚ â””â”€â†’ console.log('John Smith...')      â”‚
â”‚ â””â”€â†’ io.to('room-123').emit(...)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Time 0.2ms (Broadcast):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEACHER receives:    â”‚  â”‚ STUDENT receives:    â”‚
â”‚                      â”‚  â”‚                      â”‚
â”‚ 'whiteboard-        â”‚  â”‚ 'whiteboard-        â”‚
â”‚  permission-request'â”‚  â”‚  permission-request' â”‚
â”‚                      â”‚  â”‚                      â”‚
â”‚ â†’ setPermission     â”‚  â”‚ â†’ No action         â”‚
â”‚   Requests(...)     â”‚  â”‚                      â”‚
â”‚                      â”‚  â”‚                      â”‚
â”‚ â†’ Shows ğŸ”” badge    â”‚  â”‚ â†’ Already waiting   â”‚
â”‚   with request      â”‚  â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RESULT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEACHER sees NEW:                   â”‚  â”‚ STUDENT sees:                       â”‚
â”‚                                     â”‚  â”‚                                     â”‚
â”‚ ğŸ”” Drawing Requests (1)             â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚ â³ Permission request sent... â”‚   â”‚
â”‚ â”‚ â€¢ John Smith                    â”‚ â”‚  â”‚ â”‚                               â”‚   â”‚
â”‚ â”‚   [âœ… Approve] [âŒ Reject]      â”‚ â”‚  â”‚ â”‚ (Button disabled, waiting)    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚  â”‚                                     â”‚
â”‚ âœï¸ Has Drawing Permission           â”‚  â”‚ (Can still see teacher's drawing)  â”‚
â”‚ â€¢ (no one approved yet)             â”‚  â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Step 4: Teacher Approves Request
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TEACHER ACTION: Click âœ… Approve button

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Teacher clicks:  â”‚
â”‚ âœ… Approve       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â†’ Frontend: approvePermissionRequest('student-456')
           â”‚
           â”œâ”€â†’ Add to allowedUsers: ['student-456']
           â”‚
           â”œâ”€â†’ socket.emit('whiteboard-permissions-update', {
           â”‚     roomId: 'room-123',
           â”‚     permissions: { adminOnly: true, allowedUsers: ['student-456'] }
           â”‚   })
           â”‚
           â”œâ”€â†’ socket.emit('whiteboard-permission-approve', {
           â”‚     roomId: 'room-123',
           â”‚     userId: 'student-456',
           â”‚     approvedBy: 'teacher-123'
           â”‚   })
           â”‚
           â””â”€â†’ Remove from permissionRequests list

Backend Broadcasts (io.to('room-123')):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Event 1: 'whiteboard-permissions'           â”‚
â”‚ {adminOnly: true, allowedUsers: [...]}      â”‚
â”‚                                             â”‚
â”‚ Event 2: 'whiteboard-permission-approved'   â”‚
â”‚ {userId: 'student-456', approvedBy: '...'}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Time 0.2ms (Students receive):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEACHER's update:                   â”‚
â”‚                                     â”‚
â”‚ âœï¸ Has Drawing Permission           â”‚
â”‚ â€¢ John Smith âœ… [revoke]            â”‚
â”‚                                     â”‚
â”‚ ğŸ”” Drawing Requests (0) - GONE!     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JOHN SMITH (Student) update:        â”‚
â”‚                                     â”‚
â”‚ socket.on('whiteboard-permissions'  â”‚
â”‚   if (userId in allowedUsers)       â”‚
â”‚     setCanDraw(true)                â”‚
â”‚                                     â”‚
â”‚ socket.on('whiteboard-permission-   â”‚
â”‚             approved')              â”‚
â”‚   if (data.userId === userId)       â”‚
â”‚     setCanDraw(true) âœ¨             â”‚
â”‚     Overlay DISAPPEARS              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RESULT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEACHER's Whiteboard:               â”‚  â”‚ JOHN SMITH's Whiteboard:            â”‚
â”‚                                     â”‚  â”‚                                     â”‚
â”‚ âœï¸ Pen | ğŸ§¹ Eraser | [Color]       â”‚  â”‚ âœï¸ Pen | ğŸ§¹ Eraser | [Color]       â”‚
â”‚ Size: 2px | [ğŸ—‘ï¸ Clear]             â”‚  â”‚ Size: 2px                           â”‚
â”‚                                     â”‚  â”‚                                     â”‚
â”‚ [Teacher drawing]                   â”‚  â”‚ [Teacher's drawing + John can now   â”‚
â”‚                                     â”‚  â”‚  draw on top! Drawing syncs real-   â”‚
â”‚ ğŸ”” (No pending requests)            â”‚  â”‚  time to all participants]          â”‚
â”‚                                     â”‚  â”‚                                     â”‚
â”‚ âœï¸ Has Drawing Permission           â”‚  â”‚ âœ… CAN NOW DRAW! No overlay!       â”‚
â”‚ â€¢ John Smith âœ… [revoke]            â”‚  â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Step 5: Both Draw Together (Real-Time Sync)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

COLLABORATIVE DRAWING

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEACHER:                            â”‚  â”‚ JOHN SMITH:                         â”‚
â”‚                                     â”‚  â”‚                                     â”‚
â”‚ Drawing a triangle                  â”‚  â”‚ Drawing a square                    â”‚
â”‚                                     â”‚  â”‚                                     â”‚
â”‚     /\                              â”‚  â”‚     /\     â”Œâ”€â”€â”                    â”‚
â”‚    /  \                             â”‚  â”‚    /  \    â”‚  â”‚                    â”‚
â”‚   /____\                            â”‚  â”‚   /____\   â””â”€â”€â”˜                    â”‚
â”‚                                     â”‚  â”‚                                     â”‚
â”‚ (via Socket.io: 'whiteboard-draw')  â”‚  â”‚ (via Socket.io: 'whiteboard-draw')  â”‚
â”‚                                     â”‚  â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                   â”‚                   â”‚          â”‚
           â””â”€â”€â”€â”€â”€â†’ Backend â†â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   (server.js)
                        â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                        â”‚
      broadcasts to all             broadcasts to all
            â”‚                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚ Teacher     â”‚          â”‚ John        â”‚
    â”‚ receives    â”‚          â”‚ receives    â”‚
    â”‚ John's      â”‚          â”‚ Teacher's   â”‚
    â”‚ square âœ…   â”‚          â”‚ triangle âœ… â”‚
    â”‚             â”‚          â”‚             â”‚
    â”‚ Sees both   â”‚          â”‚ Sees both   â”‚
    â”‚ drawings    â”‚          â”‚ drawings    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Step 6: Other Student Can Also Request
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Meanwhile, another student (Jane) sees the same workflow:

JANE'S VIEW:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ï¸ View Only                        â”‚
â”‚                                     â”‚
â”‚ Can see Teacher and John drawing    â”‚
â”‚ (real-time sync of their work)      â”‚
â”‚                                     â”‚
â”‚ [ğŸ“ Request Drawing Permission]     â”‚
â”‚      (Jane clicks)                  â”‚
â”‚                        â†“            â”‚
â”‚ â³ Permission request sent...       â”‚
â”‚      (Waiting for approval)         â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TEACHER sees:
ğŸ”” Drawing Requests (1)
â€¢ Jane Smith  [âœ…] [âŒ]

Can approve, reject, or ignore...


Step 7: Reject Request (Example)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

If Teacher clicks âŒ Reject for Jane:

JANE sees:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ï¸ View Only                        â”‚
â”‚                                     â”‚
â”‚ Admin hasn't granted you permission â”‚
â”‚                                     â”‚
â”‚ [ğŸ“ Request Drawing Permission]     â”‚
â”‚ (Button re-enabled for retry)       â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Jane can click the button again if she wants to request again.


Step 8: Teacher Revokes Access (Example)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

If Teacher clicks green "John Smith âœ…" button to revoke:

JOHN sees:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ï¸ View Only                        â”‚
â”‚                                     â”‚
â”‚ Admin hasn't granted you permission â”‚
â”‚                                     â”‚
â”‚ [ğŸ“ Request Drawing Permission]     â”‚
â”‚ (Can request again)                 â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

John's next drawing attempt has no effect on canvas.

```

---

## State Machine Diagrams

### User Permission States

```
START
  â”‚
  â””â”€â”€â†’ [NO_ACCESS] â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ (View-only)            â”‚
       â”‚                        â”‚
       â”‚ Click Request Button   â”‚ Reject Request
       â”‚                        â”‚
       â–¼                        â”‚
  [PENDING] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
  (â³ request sent)    â”‚        â”‚
       â”‚               â”‚        â”‚
       â”‚      Timeout  â”‚ (future)
       â”‚      expires  â”‚
       â”‚               â–¼
       â”‚            [TIMEOUT]
       â”‚               â”‚
       â””â”€â†’ Approve â”€â”€â”€â†’ [CAN_DRAW] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           (âœ…)        (Full access)              â”‚
                            â”‚                    â”‚
                            â”‚ Revoke Button      â”‚
                            â”‚ (or call ends)     â”‚
                            â””â”€â”€â”€â”€â†’ [NO_ACCESS] â”€â”€â†’ Click Request...
                                   (back to start)
```

### Admin Request List States

```
NO_REQUESTS
  â”‚
  â”‚ User sends request
  â–¼
[1_REQUEST]  â”€â”€â”€â†’ Approve/Reject â”€â”€â”€â†’ [0_REQUESTS]
  â”‚
  â”‚ Second user requests
  â–¼
[2_REQUESTS] â”€â”€â”€â†’ Approve first â”€â”€â”€â†’ [1_REQUEST]
  â”‚
  â”‚ Approve second
  â–¼
[0_REQUESTS]
```

### Real-Time Sync Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Draw Event  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Broadcast  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User A      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   Backend    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ User B      â”‚
â”‚ Draws line  â”‚ (Socket.io)  â”‚  server.js   â”‚ (io.to())    â”‚ Sees line   â”‚
â”‚             â”‚              â”‚              â”‚              â”‚ appear      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                             â”‚                            â”‚
      â”‚                             â”‚                            â”‚
      â–¼                             â–¼                            â–¼
  Canvas.draw()           socket.on('draw')              canvas.draw()
  (local render)          console.log()                  (remote render)
                          io.to().emit()
                          (all in room)
```

---

## Event Sequence Diagram

```
User              Frontend             Backend             Other Users
  â”‚                 â”‚                    â”‚                      â”‚
  â”‚ Clicks Request  â”‚                    â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                    â”‚                      â”‚
  â”‚                 â”‚ emit('request')    â”‚                      â”‚
  â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                      â”‚
  â”‚                 â”‚                    â”‚ broadcast            â”‚
  â”‚                 â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Teacher
  â”‚                 â”‚                    â”‚ 'permission-request' â”‚ sees request
  â”‚                 â”‚ (waiting...)       â”‚                      â”‚
  â”‚                 â”‚                    â”‚                      â”‚
  â”‚                 â”‚                    â”‚ Click Approve        â”‚
  â”‚                 â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                 â”‚ emit('approve')    â”‚                      â”‚
  â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                      â”‚
  â”‚                 â”‚                    â”‚ broadcast            â”‚
  â”‚                 â”‚ 'permission-       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ All users
  â”‚                 â”‚  approved'         â”‚ 'approved'           â”‚ get event
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚ + 'permissions'      â”‚
  â”‚ Can draw now!   â”‚                    â”‚                      â”‚
  â”‚ Overlay gone    â”‚                    â”‚                      â”‚
  â”‚                 â”‚                    â”‚                      â”‚
  â–¼                 â–¼                    â–¼                      â–¼
```

---

## Component Hierarchy

```
VideoCall
  â”‚
  â””â”€â†’ Whiteboard
      â”‚
      â”œâ”€â†’ Canvas Element
      â”‚   â”œâ”€ Drawing tools (pen/eraser)
      â”‚   â”œâ”€ Color picker
      â”‚   â””â”€ Size control
      â”‚
      â”œâ”€â†’ Non-Admin View-Only Overlay (if !canDraw)
      â”‚   â”œâ”€ Text message
      â”‚   â”œâ”€ Request Button (if !hasRequested)
      â”‚   â””â”€ Pending message (if hasRequested)
      â”‚
      â””â”€â†’ Admin Control Panel (if isAdmin)
          â”‚
          â”œâ”€â†’ Permissions Request List
          â”‚   â””â”€ For each request:
          â”‚       â”œâ”€ Username
          â”‚       â”œâ”€ Approve Button
          â”‚       â””â”€ Reject Button
          â”‚
          â””â”€â†’ Current Permissions List
              â””â”€ For each participant:
                  â”œâ”€ Username
                  â”œâ”€ Status (Has/Denied)
                  â””â”€ Toggle Button (grant/revoke)
```

---

## Permission Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WhiteboardPermissions            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                â”‚
â”‚   adminOnly: true,               â”‚
â”‚   allowedUsers: [                â”‚
â”‚     "user-123",  â† Can draw      â”‚
â”‚     "user-456",  â† Can draw      â”‚
â”‚   ]                              â”‚
â”‚ }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Check if User Can Draw:
  canDraw = isAdmin || allowedUsers.includes(userId)

View Logic:
  â€¢ Admin: Always shows canvas (canDraw = true)
  â€¢ User in allowedUsers: Shows canvas (canDraw = true)
  â€¢ Other users: Shows overlay (canDraw = false)
```

---

## Socket Event Reference

```
CLIENT â†’ SERVER â†’ BROADCAST TO ROOM

[REQUEST PERMISSION]
  Client:   socket.emit('whiteboard-request-permission', {...})
  Server:   io.to(roomId).emit('whiteboard-permission-request', {...})
  Broadcast: All users see request appear

[APPROVE REQUEST]
  Client:   socket.emit('whiteboard-permission-approve', {...})
  Server:   io.to(roomId).emit('whiteboard-permission-approved', {...})
  Server:   io.to(roomId).emit('whiteboard-permissions', {...})
  Broadcast: User can draw + permissions updated

[REJECT REQUEST]
  Client:   socket.emit('whiteboard-permission-reject', {...})
  Server:   io.to(roomId).emit('whiteboard-permission-rejected', {...})
  Broadcast: Requester gets rejected, can request again

[PERMISSIONS UPDATE]
  Client:   socket.emit('whiteboard-permissions-update', {...})
  Server:   io.to(roomId).emit('whiteboard-permissions', {...})
  Broadcast: All get updated permission list
```

---

## Decision Tree

```
User joins whiteboard in call:
â”‚
â”œâ”€â†’ Is admin? 
â”‚   â”‚
â”‚   YES â†’ Can draw immediately
â”‚         See permissions panel
â”‚         See request list (when available)
â”‚
â”‚   NO  â†’ View only
â”‚         Can see request button?
â”‚         â”‚
â”‚         YES, hasRequested = false â†’ Show "Request" button
â”‚         â”‚
â”‚         YES, hasRequested = true  â†’ Show "â³ Sent..." message
â”‚         â”‚
â”‚         Approved by admin â†’ canDraw = true, overlay gone âœ¨
```

---

**All diagrams Â© 2026 ischkul-azure Project**

